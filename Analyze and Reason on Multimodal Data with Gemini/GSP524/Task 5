# 1. Load the analysis results from the files
with open('analysis/text_analysis.md', 'r') as f:
    text_analysis = f.read()

with open('analysis/image_analysis.md', 'r') as f:
    image_analysis = f.read()

with open('analysis/audio_analysis.md', 'r') as f:
    audio_analysis = f.read()

# 2. Combine the analysis results
all_analysis = f"""
## Text Analysis:
{text_analysis}

## Image Analysis:
{image_analysis}

## Audio Analysis:
{audio_analysis}
"""
# 3. Construct the prompt for Gemini
# TODO: Write a prompt to instruct the Gemini model to generate a comprehensive report based on the combined analysis results.
# The prompt should include clear instructions to:
# - Summarize the overall sentiment towards the new apparel line.
# - Identify key themes and trends in customer feedback.
# - Provide insights on style preferences, usage patterns, and customer behavior.
# - Evaluate the audio and its fit with the product image.
# - Offer actionable recommendations for Cymbal Direct to refine their marketing strategy and product positioning.
comprehensive_report_prompt = f"""
You are a senior market research analyst tasked with preparing a comprehensive insights report for Cymbal Direct’s new athletic apparel line. 
Use the combined analysis results (text, image, and audio) to generate a structured report.

Your report should include:
1. **Executive Summary** — summarize the overall sentiment toward the new apparel line.
2. **Key Themes & Trends** — highlight recurring themes across customer reviews, social media, images, and audio discussions.
3. **Style Preferences & Customer Behavior** — describe observed preferences, usage patterns, and customer segments.
4. **Audio Fit with Brand Image** — evaluate how the podcast/audio insights align with Cymbal Direct’s brand perception and visual identity.
5. **Recommendations** — provide 3–5 actionable recommendations for refining marketing strategy, product positioning, or product development.

Ensure the report is concise, clear, and formatted for presentation to Cymbal Direct’s leadership team.

Here is the combined analysis data:
{all_analysis}
"""

# 4. Send the prompt to Gemini
# TODO: Use the `client.models.generate_content` method to send the comprehensive_report_prompt to the Gemini model.
# TODO: Make sure to specify the `MODEL_ID`, the `comprehensive_report_prompt`, and the `config` to enable thinking mode.
# TODO: Store the response from the model in a variable named `thinking_model_response`.
thinking_model_response = client.models.generate_content(
    model=MODEL_ID,
    contents=comprehensive_report_prompt,
    config=config
)

# 5. Print the thoughts and answer
print_thoughts(thinking_model_response)

# 6. Save the final report to a file
with open('analysis/final_report.md', 'w') as f:
    f.write(thinking_model_response.text)